<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Command.html">
<link rel="next" href="Main.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Poker" rel="Chapter" href="Poker.html">
<link title="Command" rel="Chapter" href="Command.html">
<link title="State" rel="Chapter" href="State.html">
<link title="Main" rel="Chapter" href="Main.html">
<link title="Author" rel="Chapter" href="Author.html">
<link title="Bot" rel="Chapter" href="Bot.html">
<link title="TestBot" rel="Chapter" href="TestBot.html">
<link title="MyBot" rel="Chapter" href="MyBot.html"><title>State</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Command.html" title="Command">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Main.html" title="Main">Next</a>
</div>
<h1>Module <a href="type_State.html">State</a></h1>

<pre><span id="MODULEState"><span class="keyword">module</span> State</span>: <code class="code">sig</code> <a href="State.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>The abstract type of the stage of the game</p>
</div>
</div>
<hr width="100%">

<pre><code><span id="TYPEstage"><span class="keyword">type</span> <code class="type"></code>stage</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstage.Init"><span class="constructor">Init</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstage.Deal"><span class="constructor">Deal</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstage.Flop"><span class="constructor">Flop</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstage.Turn"><span class="constructor">Turn</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTstage.River"><span class="constructor">River</span></span></code></td>

</tr></table>



<pre><span id="VALstring_of_stage_to_string"><span class="keyword">val</span> string_of_stage_to_string</span> : <code class="type"><a href="State.html#TYPEstage">stage</a> -> string</code></pre>
<pre><code><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.subgame_number">subgame_number</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.game_stage">game_stage</span>&nbsp;: <code class="type"><a href="State.html#TYPEstage">stage</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.players">players</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a> list</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.small_blind">small_blind</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.big_blind">big_blind</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.player_to_act">player_to_act</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.pot">pot</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.community_cards">community_cards</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEcard">Poker.card</a> list</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.call_cost">call_cost</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.deck">deck</span>&nbsp;: <code class="type"><a href="Poker.html#TYPEcard">Poker.card</a> list</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.blind_amount">blind_amount</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr></table>
<code>}</code>

<div class="info ">
<div class="info-desc">
<p>The abstract type of values representing the game state.</p>
</div>
</div>


<pre><code><span id="TYPEresult"><span class="keyword">type</span> <code class="type"></code>result</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTresult.Legal"><span class="constructor">Legal</span></span> <span class="keyword">of</span> <code class="type"><a href="State.html#TYPEt">t</a></code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTresult.Illegal"><span class="constructor">Illegal</span></span></code></td>

</tr></table>

<div class="info ">
<div class="info-desc">
<p>The type representing the result of an attempted bet</p>
</div>
</div>


<pre><span id="VALget_next_player"><span class="keyword">val</span> get_next_player</span> : <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> list -> <a href="Poker.html#TYPEplayer">Poker.player</a></code></pre><div class="info ">
<div class="info-desc">
<p>returns the player after <code class="code">player</code> in circular-list <code class="code">players</code>
    requires: <code class="code">player</code> in <code class="code">players</code>
    Examples:
     players = <code class="code">1,3,6</code> get_next_player 3 players is 6
     players = <code class="code">1,3,6</code> get_next_player 6 players is 1</p>

<p>returns the player after <code class="code">player</code> in circular-list <code class="code">players</code>
    requires: <code class="code">player</code> in <code class="code">players</code>
    Examples:
     players = <code class="code">1,3,6</code> get_next_player 3 players is 6
     players = <code class="code">1,3,6</code> get_next_player 6 players is 1</p>
</div>
</div>

<pre><span id="VALinit_state"><span class="keyword">val</span> init_state</span> : <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a> list -> int -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p>Initalizes a game state with the players. Blind is small blind big_blind is 
    2x small blind</p>
</div>
</div>

<pre><span id="VALget_subgame"><span class="keyword">val</span> get_subgame</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_subgame t</code> returns how many subgames have past
    Example: when the game is first initalized, <code class="code">get_subgame t</code> returns 0
          after end_subgame has been called once <code class="code">get_subgame t</code> returns 1</p>
</div>
</div>

<pre><span id="VALget_stage"><span class="keyword">val</span> get_stage</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEstage">stage</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get stage t</code> returns the current stage of the subgame</p>
</div>
</div>

<pre><span id="VALcurrent_player"><span class="keyword">val</span> current_player</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">current_player t</code> returns the player to act</p>
</div>
</div>

<pre><span id="VALget_players"><span class="keyword">val</span> get_players</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_players t</code> returns a list of players in the game</p>
</div>
</div>

<pre><span id="VALget_active_players"><span class="keyword">val</span> get_active_players</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_active_players t</code> returns a list of ACTIVE players in the game</p>
</div>
</div>

<pre><span id="VALget_big_blind"><span class="keyword">val</span> get_big_blind</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_big_blind t</code> returns the player who currently has the big blind</p>
</div>
</div>

<pre><span id="VALget_community_cards"><span class="keyword">val</span> get_community_cards</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEcard">Poker.card</a> list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_community_cards t</code> returns a list containing the community cards.
    'community cards' refers to the cards on the table not in players hands
    i.e. the cards from the flop turn and river</p>
</div>
</div>

<pre><span id="VALget_pot"><span class="keyword">val</span> get_pot</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_pot t</code> returns the pot
    The pot is the sum of all the players bets</p>
</div>
</div>

<pre><span id="VALget_call_cost"><span class="keyword">val</span> get_call_cost</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_call_cost t</code> returns the call cost
    the call cost is the price a player must bet to continue playing</p>
</div>
</div>

<pre><span id="VALpay_big_blind"><span class="keyword">val</span> pay_big_blind</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre>
<pre><span id="VALget_deck"><span class="keyword">val</span> get_deck</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEcard">Poker.card</a> list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_deck</code> returns all the cards that have not been delt</p>
</div>
</div>

<pre><span id="VALincr_subgame"><span class="keyword">val</span> incr_subgame</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">incr_subgame t</code> increments the subgame counter by 1</p>
</div>
</div>

<pre><span id="VALincr_stage"><span class="keyword">val</span> incr_stage</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">incr_stage t</code> returns t with the next state
    example: if t was in stage Flop, <code class="code">incr_state t</code> would return</p>
</div>
</div>

<pre><span id="VALget_player_by_id"><span class="keyword">val</span> get_player_by_id</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> int -> <a href="Poker.html#TYPEplayer">Poker.player</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_big_blind t id</code> returns the player with id <code class="code">id</code></p>
</div>
</div>

<pre><span id="VALraise"><span class="keyword">val</span> raise</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> -> int -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">raise t p amount</code> returns legal of t if p has more than amount in stack
    and Illegal otherwise. t is also updated to include new call cost, pot, and 
    updated players</p>
</div>
</div>

<pre><span id="VALcall"><span class="keyword">val</span> call</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">call t p</code> returns legal of t if player p has enough in stack to cover the cost
    to call. returns Illegal otherwise. if legal, t is updated to reflect new 
    pot and player stacks.</p>
</div>
</div>

<pre><span id="VALfold"><span class="keyword">val</span> fold</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Poker.html#TYPEplayer">Poker.player</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">fold t p</code> returns t with p as inactive. inactive players are no longer able
    to win the subgame.</p>
</div>
</div>

<pre><span id="VALfirst_n_helper"><span class="keyword">val</span> first_n_helper</span> : <code class="type">'a list -> int -> int -> 'a list -> 'a list * 'a list</code></pre>
<pre><span id="VALfirst_n"><span class="keyword">val</span> first_n</span> : <code class="type">'a list -> int -> 'a list * 'a list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">first_n lst n</code> returns a tuple, the first element is the first n elements
    of <code class="code">lst</code> and the second element is the rest of <code class="code">lst</code></p>
</div>
</div>

<pre><span id="VALdeal_helper"><span class="keyword">val</span> deal_helper</span> : <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a> list -><br>       <a href="Poker.html#TYPEcard">Poker.card</a> list -> <a href="Poker.html#TYPEplayer">Poker.player</a> list -> <a href="Poker.html#TYPEcard">Poker.card</a> list * <a href="Poker.html#TYPEplayer">Poker.player</a> list</code></pre>
<pre><span id="VALdeal"><span class="keyword">val</span> deal</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">deal t</code> gives all players two hole cards</p>
</div>
</div>

<pre><span id="VALflop"><span class="keyword">val</span> flop</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">flop t</code> adds three cards from the deck to the community cards. These
     cards are removed from the deck.</p>
</div>
</div>

<pre><span id="VALturn"><span class="keyword">val</span> turn</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">turn t</code> adds one card from the deck to the community cards. This card is 
    removed from the deck</p>
</div>
</div>

<pre><span id="VALriver"><span class="keyword">val</span> river</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">river t</code> adds one card from the deck to the community cards. This card is 
    removed from the deck</p>
</div>
</div>

<pre><span id="VALdistribute_pot"><span class="keyword">val</span> distribute_pot</span> : <code class="type"><a href="Poker.html#TYPEplayer">Poker.player</a> list -> <a href="Poker.html#TYPEplayer">Poker.player</a> list -> int -> <a href="Poker.html#TYPEplayer">Poker.player</a> list</code></pre>
<pre><span id="VALget_winners"><span class="keyword">val</span> get_winners</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> (<a href="Poker.html#TYPEplayer">Poker.player</a> * <a href="Poker.html#TYPEhand">Poker.hand</a>) list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_winners t</code> gets the winners of the current state.</p>
</div>
</div>

<pre><span id="VALend_subgame"><span class="keyword">val</span> end_subgame</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">end_subgame t</code> ends current subgame. 
    the returned state gives winner(s) the pot and moves blinds. 
    it also gets a newly shuffled deck and resets the pot and call costs</p>
</div>
</div>
</body></html>
